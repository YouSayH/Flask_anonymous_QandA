<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>è³ªå•è©³ç´° - åŒ¿åQ&Aãƒœãƒ¼ãƒ‰</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
  <header>
    <div class="back-link">
      <a href="{{ url_for('main.index') }}">â† æˆ»ã‚‹</a>
    </div>
    <div class="header-text">
      <h1>è³ªå•è©³ç´°</h1>
      {% if session.get('st_num') %}
      <div class="user-info">
        å­¦ç±ç•ªå·: {{ session.get('st_num') }}
      </div>
      {% endif %}
    </div>
    {% if session.get('st_num') %}
    <div class="logout-button">
      <a href="{{ url_for('main.logout') }}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
    </div>
    {% endif %}
  </header>

  <main>
    <!-- è³ªå•å†…å®¹è¡¨ç¤º -->
    <div class="question-container">
      <article class="question-detail">
        <h2 class="question-title">{{ question['question_content'] | e }}</h2>
        <p class="timestamp">æŠ•ç¨¿æ—¥æ™‚: {{ question['created_at'] }}</p>
      </article>

      <!-- å›ç­”ä¸€è¦§ -->
      <form method="POST" action="{{ url_for('main.select_best', question_id=question['id']) }}">
        <section id="answers-list">
          <h3>å›ç­”ä¸€è¦§</h3>
          <ul>
            {% for answer in answers %}
            <li>
              <input type="radio" name="best_answer" value="{{ answer['id'] }}" {% if
                question['best_answer_id']==answer['id'] %} checked {% endif %}>
              {% if question['best_answer_id'] == answer['id'] %}
              <span class="best-answer-badge">ğŸ… ãƒ™ã‚¹ãƒˆã‚¢ãƒ³ã‚µãƒ¼</span>
              {% endif %}
              <p class="answer-content">{{ answer['answer_content'] | e }}</p>
              <span class="timestamp">{{ answer['created_at'] }}</span>
            </li>
            {% else %}
            <li>ã¾ã å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            {% endfor %}
          </ul>
        </section>
        <button type="submit">ãƒ™ã‚¹ãƒˆã‚¢ãƒ³ã‚µãƒ¼ã‚’æ±ºå®šã™ã‚‹</button>
      </form>


      <!-- å›ç­”æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ  -->
      <section id="post-answer">
        <h3>å›ç­”ã‚’æŠ•ç¨¿ã™ã‚‹</h3>
        <form action="{{ url_for('main.answer', question_id=question['id']) }}" method="POST">
          <div class="post-answer-form">
            <textarea name="answer" rows="4" placeholder="å›ç­”å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
            <button type="submit" class="post-answer-button">å›ç­”ã‚’æŠ•ç¨¿ã™ã‚‹</button>
          </div>
        </form>
      </section>
    </div>
  </main>
</body>

</html>